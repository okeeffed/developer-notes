{"version":3,"sources":["webpack:///../manual/Chef/Chef-Udemy.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---manual-chef-chef-udemy-md-841b8df9e2728c2aa02a.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/dennis.okeeffe/Project-Imposter/developer-notes/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"chef---udemy-course\"\n    }}>{`Chef - Udemy Course`}</h1>\n    {\n      /* TOC */\n    }\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#chef---udemy-course\"\n        }}>{`Chef - Udemy Course`}</a><ul parentName=\"li\">\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#configuration-management\"\n            }}>{`Configuration Management`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#infrastructure-as-code\"\n            }}>{`Infrastructure as Code`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#your-first-chef-recipe\"\n            }}>{`Your First Chef Recipe`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chef-resources\"\n            }}>{`Chef Resources`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#exploring-system-resources\"\n            }}>{`Exploring system resources`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#convergence-and-desired-state\"\n            }}>{`Convergence and Desired State`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#creating-an-exercise-work-station\"\n            }}>{`Creating an \"Exercise Work Station\"`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#organising-resources-with-ruby\"\n            }}>{`Organising Resources with Ruby`}</a></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#cookbooks\"\n            }}>{`Cookbooks`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#how-do-you-keep-track-of-changes-to-the-recipes\"\n                }}>{`How do you keep track of changes to the recipes?`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#cookbook-components\"\n                }}>{`Cookbook Components`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#tracking-changes-to-the-cookbooks\"\n                }}>{`Tracking changes to the Cookbooks`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#setting-up-an-apache-cookbook\"\n                }}>{`Setting up an Apache Cookbook`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#chef-client\"\n            }}>{`Chef Client`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#include_recipe\"\n                }}>{`include_recipe`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#defaultrb-example\"\n                }}>{`default.rb example`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><a parentName=\"li\" {...{\n              \"href\": \"#ohai\"\n            }}>{`Ohai`}</a><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"#an-object-called-node\"\n                }}>{`An object called 'node'`}</a></li>\n            </ul></li>\n        </ul></li>\n    </ul>\n    {\n      /* /TOC */\n    }\n    <h2 {...{\n      \"id\": \"configuration-management\"\n    }}>{`Configuration Management`}</h2>\n    <p>{`Maintaining consistency for server integrity.`}</p>\n    <p>{`The process of configuration can be automated by some extent. When you reach scale, this automation is at the heart of configuration management (IT orchetration).`}</p>\n    <p>{`Imagine we are deploying a web server. If we have a config management solution, this could take minutes instead of hours.`}</p>\n    <p>{`System auditing will also be a hassle for disaster recovery too.`}</p>\n    <p>{`Revision control systems can also be version controlled with `}<inlineCode parentName=\"p\">{`infrastructure as code`}</inlineCode>{` by having these environments scripted.`}</p>\n    <h2 {...{\n      \"id\": \"infrastructure-as-code\"\n    }}>{`Infrastructure as Code`}</h2>\n    <p>{`Examples:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`version control`}</li>\n      <li parentName=\"ul\">{`testing`}</li>\n    </ul>\n    <p>{`These all helps to validate infrastructure code.`}</p>\n    <p>{`You can manage multiple cloud platforms etc.`}</p>\n    <p>{`The three things covered:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`chef development kit`}</li>\n      <li parentName=\"ul\">{`chef client`}</li>\n      <li parentName=\"ul\">{`chef server`}</li>\n    </ul>\n    <p>{`The Chef DK allows you to run local tools to write code and then upload it to a chef server. A node will be a server or machine managed by Chef.`}</p>\n    <p>{`You will get the desired state from the `}<inlineCode parentName=\"p\">{`cookbooks`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`recipes`}</inlineCode>{`.`}</p>\n    <h2 {...{\n      \"id\": \"your-first-chef-recipe\"\n    }}>{`Your First Chef Recipe`}</h2>\n    <p>{`Create a new file `}<inlineCode parentName=\"p\">{`hello.rb`}</inlineCode>{` and add `}<inlineCode parentName=\"p\">{`hello.txt`}</inlineCode>{` with Hello World.`}</p>\n    <p>{`First, give Chef a file.`}</p>\n    <p>{`Inside of the file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`file '/hello.txt' do\n    content 'Hello world!'\nend\n`}</code></pre>\n    <p>{`Running `}<inlineCode parentName=\"p\">{`sudo chef-client --client-mode hello.rb`}</inlineCode>{` will then build that file and update the content.`}</p>\n    <h2 {...{\n      \"id\": \"chef-resources\"\n    }}>{`Chef Resources`}</h2>\n    <p>{`Chef Resources are the fundamental building blocks of working with Chef.`}</p>\n    <p>{`The aim is to build the load balancer.`}</p>\n    <p>{`Resources describe the smallest piece we can configure in the system.`}</p>\n    <h2 {...{\n      \"id\": \"exploring-system-resources\"\n    }}>{`Exploring system resources`}</h2>\n    <p><strong parentName=\"p\">{`Example 1: Package Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Install the http package\npackage 'httd' do\n    action :install\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 2: Service Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Run the ntp service\nservice 'ntp' do\n    action [ :enable, :start ]\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 3: File Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Create the /etc/motd file\nfile 'etc/motd' do\n    content 'This computer is the property ...'\nend\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Example 4: File Resource`}</strong></p>\n    <pre><code parentName=\"pre\" {...{}}>{`## Remove a file\nfile 'etc/php.ini.default' do\n    action :delete\nend\n`}</code></pre>\n    <p>{`Looking back at the definition of a recipe. `}<inlineCode parentName=\"p\">{`hello.rb`}</inlineCode>{` was an example of a recipe file.`}</p>\n    <p>{`The \"type\" (eg file, service, package) and \"name\" (filename, filepath) should be action'd with \"properties\" (eg content 'Hello World!'). When we list a resource, we take `}<inlineCode parentName=\"p\">{`action`}</inlineCode>{` on that resource (eg `}<inlineCode parentName=\"p\">{`action :create`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`action :delete`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`action :enable`}</inlineCode>{`). The default action is taken if you do not list the action. The default is more of a `}<inlineCode parentName=\"p\">{`create`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`install`}</inlineCode>{` - it is important to know about what it is as you are writing out recipes.`}</p>\n    <h2 {...{\n      \"id\": \"convergence-and-desired-state\"\n    }}>{`Convergence and Desired State`}</h2>\n    <p>{`With the command `}<inlineCode parentName=\"p\">{`sudo chef-client --local-mode hello.rb`}</inlineCode>{`, when we run `}<inlineCode parentName=\"p\">{`--local-mode`}</inlineCode>{` we did it because the default mode is to talk to a `}<inlineCode parentName=\"p\">{`chef server`}</inlineCode>{`. Once we have a Chef server to work with, we can not use this mode.`}</p>\n    <p>{`What happens if you modify the content of the file that we create directly, what happens when Chef runs again?`}</p>\n    <p>{`Chef will then attempt to `}<inlineCode parentName=\"p\">{`repair`}</inlineCode>{` the file changes.`}</p>\n    <p>{`If we change the ownership for a file, Chef will only take action when it needs to. It will only take action if something is \"out of policy\".`}</p>\n    <h2 {...{\n      \"id\": \"creating-an-exercise-work-station\"\n    }}>{`Creating an \"Exercise Work Station\"`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# creating tree and ntp\npackage 'tree' do\n    action :install\nend\n\npackage 'ntp'\n\n# /etc/motd - content ownership\nfile '/etc/motd' do\n    content 'This is the property of me'\n    action :create\n    owner 'root'\n    group 'root'\nend\n`}</code></pre>\n    <p>{`You can also build an array and pass it into a package resource, but if we do that we won't have access to things like versions etc.`}</p>\n    <p>{`Then we can just run `}<inlineCode parentName=\"p\">{`sudo chef-client -z setup.rb`}</inlineCode>{`.`}</p>\n    <p>{`If we re-run the script, no actions will be taken if nothing needs to be modified.`}</p>\n    <h2 {...{\n      \"id\": \"organising-resources-with-ruby\"\n    }}>{`Organising Resources with Ruby`}</h2>\n    <p>{`You can also call recipes from other recipes.`}</p>\n    <p>{`Chef also runs the Ruby files synchronously.`}</p>\n    <h2 {...{\n      \"id\": \"cookbooks\"\n    }}>{`Cookbooks`}</h2>\n    <p>{`Ways to group recipes and put them into useful configurations.`}</p>\n    <p>{`Instead of a single recipe being sent to a server, we send a `}<inlineCode parentName=\"p\">{`cookbook`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"how-do-you-keep-track-of-changes-to-the-recipes\"\n    }}>{`How do you keep track of changes to the recipes?`}</h3>\n    <p>{`Cookbooks allow a way to package up the recipes and give it a version number and track changes.`}</p>\n    <p><inlineCode parentName=\"p\">{`A fundamental unit of configuration and policy distribution`}</inlineCode></p>\n    <p>{`When creating the cookbook, is describes a config for a particular scenario.`}</p>\n    <p>{`What to use cookbooks for:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Specifiy resources to use and in which order they are applied`}</li>\n      <li parentName=\"ul\">{`Attribute values`}</li>\n      <li parentName=\"ul\">{`File distributions`}</li>\n      <li parentName=\"ul\">{`Templates`}</li>\n      <li parentName=\"ul\">{`Extensions to Chef (lib, definitions and custom resources)`}</li>\n      <li parentName=\"ul\">{`Version Control`}</li>\n    </ul>\n    <p>{`Cookbook components:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`README`}</li>\n      <li parentName=\"ul\">{`metadata`}</li>\n      <li parentName=\"ul\">{`recipes`}</li>\n      <li parentName=\"ul\">{`testing directories (spec + test)`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"cookbook-components\"\n    }}>{`Cookbook Components`}</h3>\n    <p>{`We can create cookbooks by using `}<inlineCode parentName=\"p\">{`chef generate [cookbook|other]`}</inlineCode>{`.`}</p>\n    <p>{`When we generate a cookbook, we should give the cookbook a relevant name. Example `}<inlineCode parentName=\"p\">{`chef generate cookbooks/workstation`}</inlineCode>{` to create a `}<inlineCode parentName=\"p\">{`workstation`}</inlineCode>{` book in the `}<inlineCode parentName=\"p\">{`cookbooks`}</inlineCode>{` folder.`}</p>\n    <h3 {...{\n      \"id\": \"tracking-changes-to-the-cookbooks\"\n    }}>{`Tracking changes to the Cookbooks`}</h3>\n    <p>{`Inside of a single repository, changes are generally tracked for a single cook book.`}</p>\n    <h3 {...{\n      \"id\": \"setting-up-an-apache-cookbook\"\n    }}>{`Setting up an Apache Cookbook`}</h3>\n    <p>{`First, create a new cookbook in the cookbooks foler using `}<inlineCode parentName=\"p\">{`chef generate cookbook cookbooks/apache`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# Server\n\n# 1. http package install (redhat)\npackage 'httpd' do\n    action :install\nend\n\n# 2. configure default apache server file /var/www/html\nfile '/var/www/html/index.html' do\n    content '<h1>Hello from Apache</h1>'\nend\n\n# 3. download apache, enable and start the apache service\npackage 'apache' do\n    action :install\nend\n\nservice 'httpd' do\n    action [ :enable, :start ]\nend\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"chef-client\"\n    }}>{`Chef Client`}</h2>\n    <p>{`How do we apply the recipes from the cookbooks from the Chef client? How do we call multiple recipes at once?`}</p>\n    <p>{`We can use a cook book to define the scenarios here.`}</p>\n    <p>{`Say we want to call a cookbook from a particular recipe.`}</p>\n    <p>{`We can also do `}<inlineCode parentName=\"p\">{`sudo chef-client -z --runlist \"recipe[cookbook::recipe]\"`}</inlineCode>{` to run a particular recipe.`}</p>\n    <p>{`For running multiple cookbook recipes, we could do `}<inlineCode parentName=\"p\">{`sudo chef-client -z --runlist \"recipe[cookbook::recipe],recipe[another-cookbook::recipe]\"`}</inlineCode>{`. This will do a `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` run in order.`}</p>\n    <p>{`The runlist DOES NOT HAVE A SPACE between recipe declarations.`}</p>\n    <h3 {...{\n      \"id\": \"include_recipe\"\n    }}>{`include_recipe`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`include_recipe`}</inlineCode>{` method allows you to include a recipe from either the online cookbook stores or from one of our own cookbooks.`}</p>\n    <p>{`This is a great way to `}<inlineCode parentName=\"p\">{`wrap`}</inlineCode>{` cookbooks.`}</p>\n    <p>{`Each of the cookbooks that we generate come with a `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` recipe. This default recipe can help us call other recipes.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`# in the default.rb file for a recipe\n\n# example 'cookbook::recipe'\ninclude_recipe 'workstation::setup'\n`}</code></pre>\n    <p>{`If we now run `}<inlineCode parentName=\"p\">{`sudo chef-client -z -r \"recipe[workstation]\"`}</inlineCode>{` and omit the specific recipe, then the `}<inlineCode parentName=\"p\">{`default.rb`}</inlineCode>{` recipe will be used.`}</p>\n    <h3 {...{\n      \"id\": \"defaultrb-example\"\n    }}>{`default.rb example`}</h3>\n    <p>{`Including the server recipe from the apache cookbook.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ruby\"\n      }}>{`include_recipe 'apache::server'\n`}</code></pre>\n    <p>{`Now we can call sudo chef-client -z -r \"recipe`}{`[apache]`}{`\"\\`.`}</p>\n    <h2 {...{\n      \"id\": \"ohai\"\n    }}>{`Ohai`}</h2>\n    <p>{`We need to think about distribution of the cookbooks to many different nodes.`}</p>\n    <p>{`We may need to know a bit of information about that `}<inlineCode parentName=\"p\">{`node`}</inlineCode>{`. That's where `}<inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` comes in.`}</p>\n    <h3 {...{\n      \"id\": \"an-object-called-node\"\n    }}>{`An object called 'node'`}</h3>\n    <p>{`We can now begin to start thinking of scale - how to deal with 100s or 1000s or similar servers.`}</p>\n    <p>{`This webserver code that we have could be distributed to thousands of nodes, but the config might need to be different on each of these nodes.`}</p>\n    <p>{`What happens if a host specific config needs to be different? Eg. hostname, memory available, IP address etc. These things may very from system to system.`}</p>\n    <p><inlineCode parentName=\"p\">{`Ohai`}</inlineCode>{` is a system discovery tool. It's a command line tool that is required by `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{`.`}</p>\n    <p><inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` gives back all the node system data in JSON. Everytime `}<inlineCode parentName=\"p\">{`chef-client`}</inlineCode>{` is run, it automatically executes an `}<inlineCode parentName=\"p\">{`ohai`}</inlineCode>{` and allows this object (known as the node object) to be accessed. We call these attributes available as `}<inlineCode parentName=\"p\">{`node attributes`}</inlineCode>{`. Each `}<inlineCode parentName=\"p\">{`attribute`}</inlineCode>{` also has `}<inlineCode parentName=\"p\">{`sub-attributes`}</inlineCode>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}